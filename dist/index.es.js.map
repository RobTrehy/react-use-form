{"version":3,"file":"index.es.js","sources":["../src/context/FormContext.ts","../src/utils.ts","../src/form/Errors.ts","../src/form/Form.ts","../src/hooks/useForm.ts"],"sourcesContent":["import { AxiosInstance } from 'axios';\r\nimport { createContext } from 'react';\r\n\r\nconst FormContext = createContext<AxiosInstance | undefined>(undefined);\r\n\r\nexport default FormContext;\r\n","/**\r\n * Deep copy the given object.\r\n */\r\nexport function deepCopy<T>(obj: T): T {\r\n  if (obj === null || typeof obj !== 'object') {\r\n    return obj;\r\n  }\r\n\r\n  const copy: any = Array.isArray(obj) ? [] : {};\r\n\r\n  Object.keys(obj).forEach((key) => {\r\n    copy[key] = deepCopy((obj as any)[key]);\r\n  });\r\n\r\n  return copy;\r\n}\r\n\r\n/**\r\n * If the given value is not an array, wrap it in one.\r\n */\r\nexport function arrayWrap<T>(value: T | T[]): T[] {\r\n  return Array.isArray(value) ? value : [value];\r\n}\r\n\r\n/**\r\n * Determine if the given data has files.\r\n */\r\nexport function hasFiles(data: File | Blob | FileList | Record<string, any>): boolean {\r\n  return (\r\n    data instanceof File ||\r\n    data instanceof Blob ||\r\n    (typeof FileList !== 'undefined' && data instanceof FileList) ||\r\n    (typeof data === 'object' &&\r\n      data !== null &&\r\n      Object.values(data).find((value) => hasFiles(value)) !== undefined)\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport { arrayWrap } from '../utils';\r\n\r\nclass Errors {\r\n  state: Record<string, string[]>;\r\n  setState: React.Dispatch<React.SetStateAction<Record<string, string[]>>>;\r\n\r\n  constructor([state, setState]: [\r\n    Record<string, string[]>,\r\n    React.Dispatch<React.SetStateAction<Record<string, string[]>>>,\r\n  ]) {\r\n    this.state = state;\r\n    this.setState = setState;\r\n  }\r\n\r\n  set(errorsOrField: string | Record<string, string[]>, fieldMessages?: any) {\r\n    if (typeof errorsOrField === 'object') {\r\n      this.setState(() => errorsOrField);\r\n    } else {\r\n      this.setState((state) => ({\r\n        ...state,\r\n        [errorsOrField]: arrayWrap(fieldMessages),\r\n      }));\r\n    }\r\n  }\r\n\r\n  get(field: string): string | undefined {\r\n    if (this.state[field] !== undefined) {\r\n      return this.state[field][0];\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  getAll(field: string): string[] | undefined {\r\n    if (this.state[field] !== undefined) {\r\n      return this.state[field];\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  has(field: string): boolean {\r\n    return this.state[field] !== undefined;\r\n  }\r\n\r\n  any(): boolean {\r\n    return Object.keys(this.state).length > 0;\r\n  }\r\n\r\n  all(): Record<string, string[]> {\r\n    return this.state;\r\n  }\r\n\r\n  flatten(): string[] {\r\n    return Object.values(this.state).reduce(\r\n      (errors, fieldErrors) => [...errors, ...fieldErrors],\r\n      [],\r\n    );\r\n  }\r\n\r\n  clear(fieldOrFields?: string | string[]): void {\r\n    if (fieldOrFields === undefined) {\r\n      this.setState({});\r\n      return;\r\n    }\r\n\r\n    this.setState((state) => {\r\n      const newState = { ...state };\r\n      const fields = arrayWrap(fieldOrFields);\r\n\r\n      fields.forEach((field) => {\r\n        delete newState[field];\r\n      });\r\n\r\n      return newState;\r\n    });\r\n  }\r\n}\r\n\r\nexport default Errors;\r\n","import axios, {\r\n  AxiosError,\r\n  AxiosInstance,\r\n  AxiosProgressEvent,\r\n  AxiosRequestConfig,\r\n  AxiosResponse,\r\n  Method,\r\n} from 'axios';\r\nimport React from 'react';\r\n\r\nimport { deepCopy, hasFiles } from '../utils';\r\nimport Errors from './Errors';\r\n\r\nexport interface FormState<Data extends Record<string, any>> {\r\n  data: Data;\r\n  busy: boolean;\r\n  successful: boolean;\r\n  progress: Progress | undefined;\r\n}\r\nexport interface Progress {\r\n  total: number;\r\n  loaded: number;\r\n  percentage: number;\r\n}\r\n\r\nclass Form<Data extends Record<string, any>> {\r\n  originalData: Data;\r\n\r\n  formState: [FormState<Data>, React.Dispatch<React.SetStateAction<FormState<Data>>>];\r\n\r\n  errors: Errors;\r\n\r\n  static axios: AxiosInstance;\r\n\r\n  static errorMessage = 'Something went wrong. Please try again.';\r\n\r\n  constructor(\r\n    formState: [FormState<Data>, React.Dispatch<React.SetStateAction<FormState<Data>>>],\r\n    errorsState: [\r\n      Record<string, string[]>,\r\n      React.Dispatch<React.SetStateAction<Record<string, string[]>>>,\r\n    ],\r\n  ) {\r\n    this.formState = formState;\r\n    this.errors = new Errors(errorsState);\r\n    this.originalData = deepCopy<Data>(formState[0].data);\r\n  }\r\n\r\n  setState(field: string, value: any) {\r\n    this.formState[1]((state) => ({\r\n      ...state,\r\n      [field]: value,\r\n    }));\r\n  }\r\n\r\n  getField(key: string): any {\r\n    return this.formState[0]['data'][key];\r\n  }\r\n\r\n  set(key: string, value: any): void {\r\n    this.setState('data', {\r\n      ...this.formState[0]['data'],\r\n      [key]: value,\r\n    });\r\n  }\r\n\r\n  keys(): string[] {\r\n    return Object.keys(this.formState[0].data);\r\n  }\r\n\r\n  fill(data: Partial<Data> = {}) {\r\n    this.setState('data', {\r\n      ...this.formState[0]['data'],\r\n      ...data,\r\n    } as Data);\r\n  }\r\n\r\n  data(): Data {\r\n    return this.keys().reduce(\r\n      (data, key) => ({ ...data, [key]: this.getField(key) }),\r\n      {},\r\n    ) as Data;\r\n  }\r\n\r\n  reset(): void {\r\n    this.setState('data', this.originalData);\r\n  }\r\n\r\n  /**\r\n   * Start processing the form.\r\n   */\r\n  startProcessing() {\r\n    this.errors.clear();\r\n\r\n    this.formState[1]((state) => ({\r\n      ...state,\r\n      busy: true,\r\n      successful: false,\r\n      progress: undefined,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Finish processing the form.\r\n   */\r\n  finishProcessing() {\r\n    this.formState[1]((state) => ({\r\n      ...state,\r\n      busy: false,\r\n      successful: true,\r\n      progress: undefined,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Submit the form via a GET request.\r\n   */\r\n  get<T = any>(url: string, config: AxiosRequestConfig = {}): Promise<AxiosResponse<T>> {\r\n    return this.submit<T>('get', url, config);\r\n  }\r\n\r\n  /**\r\n   * Submit the form via a POST request.\r\n   */\r\n  post<T = any>(url: string, config: AxiosRequestConfig = {}): Promise<AxiosResponse<T>> {\r\n    return this.submit<T>('post', url, config);\r\n  }\r\n\r\n  /**\r\n   * Submit the form via a PATCH request.\r\n   */\r\n  patch<T = any>(\r\n    url: string,\r\n    config: AxiosRequestConfig = {},\r\n  ): Promise<AxiosResponse<T>> {\r\n    return this.submit<T>('patch', url, config);\r\n  }\r\n\r\n  /**\r\n   * Submit the form via a PUT request.\r\n   */\r\n  put<T = any>(url: string, config: AxiosRequestConfig = {}): Promise<AxiosResponse<T>> {\r\n    return this.submit<T>('put', url, config);\r\n  }\r\n\r\n  /**\r\n   * Submit the form via a DELETE request.\r\n   */\r\n  delete<T = any>(\r\n    url: string,\r\n    config: AxiosRequestConfig = {},\r\n  ): Promise<AxiosResponse<T>> {\r\n    return this.submit<T>('delete', url, config);\r\n  }\r\n\r\n  submit<T = any>(\r\n    method: Method,\r\n    url: string,\r\n    config: AxiosRequestConfig = {},\r\n  ): Promise<AxiosResponse<T>> {\r\n    this.startProcessing();\r\n\r\n    config = {\r\n      data: {},\r\n      params: {},\r\n      url,\r\n      method,\r\n      onUploadProgress: this.handleUploadProgress.bind(this),\r\n      ...config,\r\n    };\r\n\r\n    if (method.toLowerCase() === 'get') {\r\n      config.params = { ...this.data(), ...config.params };\r\n    } else {\r\n      config.data = { ...this.data(), ...config.data };\r\n\r\n      if (hasFiles(config.data) && !config.transformRequest) {\r\n        config.transformRequest = [(data) => this.toFormData(data)];\r\n      }\r\n    }\r\n\r\n    return new Promise<AxiosResponse<T>>((resolve, reject) => {\r\n      (Form.axios || axios)\r\n        .request(config)\r\n        .then((response: AxiosResponse<T>) => {\r\n          this.finishProcessing();\r\n          resolve(response);\r\n        })\r\n        .catch((error: AxiosError) => {\r\n          this.handleErrors(error);\r\n          reject(error);\r\n        });\r\n    });\r\n  }\r\n\r\n  handleErrors(error: AxiosError) {\r\n    if (error.response) {\r\n      this.errors.set(this.extractErrors(error.response));\r\n    }\r\n\r\n    this.formState[1]((state) => ({\r\n      ...state,\r\n      busy: false,\r\n      progress: undefined,\r\n    }));\r\n  }\r\n\r\n  extractErrors(response: AxiosResponse): Record<string, any> {\r\n    if (!response.data || typeof response.data !== 'object') {\r\n      return { error: [Form.errorMessage] };\r\n    }\r\n\r\n    if (response.data.errors) {\r\n      return { ...response.data.errors };\r\n    }\r\n\r\n    if (response.data.message) {\r\n      return { error: [response.data.message] };\r\n    }\r\n\r\n    return { ...response.data };\r\n  }\r\n\r\n  handleUploadProgress(event: AxiosProgressEvent) {\r\n    this.setState('progress', {\r\n      total: event.total,\r\n      loaded: event.loaded,\r\n      percentage: Math.round((event.loaded * 100) / (event.total || 0)),\r\n    });\r\n  }\r\n\r\n  toFormData(data: Record<string, string | Blob>) {\r\n    const formData = new FormData();\r\n\r\n    Object.keys(data).forEach((key) => {\r\n      const value = data[key];\r\n\r\n      if (typeof FileList !== 'undefined' && value instanceof FileList) {\r\n        [].slice.call(value).forEach((file) => formData.append(key, file));\r\n      } else {\r\n        formData.append(key, value);\r\n      }\r\n    });\r\n\r\n    return formData;\r\n  }\r\n}\r\n\r\nexport default Form;\r\n","import { AxiosInstance } from 'axios';\r\nimport { useContext, useState } from 'react';\r\n\r\nimport FormContext from '../context/FormContext';\r\nimport FormClass, { FormState } from '../form/Form';\r\n\r\nexport type Form<Data extends Record<string, any> = Record<string, any>> =\r\n  FormClass<Data> & Data & Omit<FormState<Data>, 'data'>;\r\n\r\nexport const useForm = <Data extends Record<string, any> = Record<string, any>>(\r\n  data: Data,\r\n  axiosInstance?: AxiosInstance,\r\n): Form<Data> => {\r\n  const axios = useContext(FormContext) || axiosInstance;\r\n\r\n  if (axios !== undefined) {\r\n    FormClass.axios = axios;\r\n  }\r\n\r\n  const formState = useState<FormState<Data>>({\r\n    data,\r\n    busy: false,\r\n    successful: false,\r\n    progress: undefined,\r\n  });\r\n\r\n  const errorsState = useState({});\r\n  const form = new FormClass(formState, errorsState);\r\n\r\n  // eslint-disable-next-line no-undef\r\n  return new Proxy(form, {\r\n    get(form: FormClass<Data>, attribute: string) {\r\n      if (form.keys().includes(attribute)) {\r\n        return form.getField(attribute);\r\n      }\r\n\r\n      if (['progress', 'busy', 'successful'].includes(attribute)) {\r\n        return form.formState[0][attribute as 'progress' | 'busy' | 'successful'];\r\n      }\r\n\r\n      return (form as any)[attribute];\r\n    },\r\n  }) as Form<Data>;\r\n};\r\n"],"names":["axios","FormClass","form"],"mappings":";;;;;;;;AAGM,MAAA,cAAc,cAAyC,MAAS;ACAhE,SAAU,SAAY,KAAM;AAChC,MAAI,QAAQ,QAAQ,OAAO,QAAQ,UAAU;AACpC,WAAA;AAAA,EACR;AAED,QAAM,OAAY,MAAM,QAAQ,GAAG,IAAI,KAAK;AAE5C,SAAO,KAAK,GAAG,EAAE,QAAQ,CAAC,QAAO;AAC1B,SAAA,OAAO,SAAU,IAAY,IAAI;AAAA,EAAA,CACvC;AAEM,SAAA;AACT;AAKM,SAAU,UAAa,OAAc;AACzC,SAAO,MAAM,QAAQ,KAAK,IAAI,QAAQ,CAAC,KAAK;AAC9C;AAKM,SAAU,SAAS,MAAkD;AAEvE,SAAA,gBAAgB,QAChB,gBAAgB,QACf,OAAO,aAAa,eAAe,gBAAgB,YACnD,OAAO,SAAS,YACf,SAAS,QACT,OAAO,OAAO,IAAI,EAAE,KAAK,CAAC,UAAU,SAAS,KAAK,CAAC,MAAM;AAE/D;AChCA,MAAM,OAAM;AAAA,EAIV,YAAY,CAAC,OAAO,QAAQ,GAG3B;AAND;AACA;AAME,SAAK,QAAQ;AACb,SAAK,WAAW;AAAA,EAClB;AAAA,EAEA,IAAI,eAAkD,eAAmB;AACnE,QAAA,OAAO,kBAAkB,UAAU;AAChC,WAAA,SAAS,MAAM,aAAa;AAAA,IAAA,OAC5B;AACA,WAAA,SAAS,CAAC,WAAW;AAAA,QACxB,GAAG;AAAA,QACH,CAAC,gBAAgB,UAAU,aAAa;AAAA,MACxC,EAAA;AAAA,IACH;AAAA,EACH;AAAA,EAEA,IAAI,OAAa;AACX,QAAA,KAAK,MAAM,WAAW,QAAW;AAC5B,aAAA,KAAK,MAAM,OAAO;AAAA,IAC1B;AAEM,WAAA;AAAA,EACT;AAAA,EAEA,OAAO,OAAa;AACd,QAAA,KAAK,MAAM,WAAW,QAAW;AACnC,aAAO,KAAK,MAAM;AAAA,IACnB;AAEM,WAAA;AAAA,EACT;AAAA,EAEA,IAAI,OAAa;AACR,WAAA,KAAK,MAAM,WAAW;AAAA,EAC/B;AAAA,EAEA,MAAG;AACD,WAAO,OAAO,KAAK,KAAK,KAAK,EAAE,SAAS;AAAA,EAC1C;AAAA,EAEA,MAAG;AACD,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,UAAO;AACL,WAAO,OAAO,OAAO,KAAK,KAAK,EAAE,OAC/B,CAAC,QAAQ,gBAAgB,CAAC,GAAG,QAAQ,GAAG,WAAW,GACnD,CAAE,CAAA;AAAA,EAEN;AAAA,EAEA,MAAM,eAAiC;AACrC,QAAI,kBAAkB,QAAW;AAC1B,WAAA,SAAS,CAAA,CAAE;AAChB;AAAA,IACD;AAEI,SAAA,SAAS,CAAC,UAAS;AAChB,YAAA,WAAW,EAAE,GAAG;AAChB,YAAA,SAAS,UAAU,aAAa;AAE/B,aAAA,QAAQ,CAAC,UAAS;AACvB,eAAO,SAAS;AAAA,MAAA,CACjB;AAEM,aAAA;AAAA,IAAA,CACR;AAAA,EACH;AACD;ACtDD,MAAM,QAAN,MAAU;AAAA,EAWR,YACE,WACA,aAGC;AAfH;AAEA;AAEA;AAaE,SAAK,YAAY;AACZ,SAAA,SAAS,IAAI,OAAO,WAAW;AACpC,SAAK,eAAe,SAAe,UAAU,GAAG,IAAI;AAAA,EACtD;AAAA,EAEA,SAAS,OAAe,OAAU;AAC3B,SAAA,UAAU,GAAG,CAAC,WAAW;AAAA,MAC5B,GAAG;AAAA,MACH,CAAC,QAAQ;AAAA,IACT,EAAA;AAAA,EACJ;AAAA,EAEA,SAAS,KAAW;AACX,WAAA,KAAK,UAAU,GAAG,QAAQ;AAAA,EACnC;AAAA,EAEA,IAAI,KAAa,OAAU;AACzB,SAAK,SAAS,QAAQ;AAAA,MACpB,GAAG,KAAK,UAAU,GAAG;AAAA,MACrB,CAAC,MAAM;AAAA,IAAA,CACR;AAAA,EACH;AAAA,EAEA,OAAI;AACF,WAAO,OAAO,KAAK,KAAK,UAAU,GAAG,IAAI;AAAA,EAC3C;AAAA,EAEA,KAAK,OAAsB,IAAE;AAC3B,SAAK,SAAS,QAAQ;AAAA,MACpB,GAAG,KAAK,UAAU,GAAG;AAAA,MACrB,GAAG;AAAA,IAAA,CACI;AAAA,EACX;AAAA,EAEA,OAAI;AACF,WAAO,KAAK,KAAI,EAAG,OACjB,CAAC,MAAM,SAAS,EAAE,GAAG,MAAM,CAAC,MAAM,KAAK,SAAS,GAAG,EAAG,IACtD,CAAA,CAAE;AAAA,EAEN;AAAA,EAEA,QAAK;AACE,SAAA,SAAS,QAAQ,KAAK,YAAY;AAAA,EACzC;AAAA,EAKA,kBAAe;AACb,SAAK,OAAO;AAEP,SAAA,UAAU,GAAG,CAAC,WAAW;AAAA,MAC5B,GAAG;AAAA,MACH,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,UAAU;AAAA,IACV,EAAA;AAAA,EACJ;AAAA,EAKA,mBAAgB;AACT,SAAA,UAAU,GAAG,CAAC,WAAW;AAAA,MAC5B,GAAG;AAAA,MACH,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,UAAU;AAAA,IACV,EAAA;AAAA,EACJ;AAAA,EAKA,IAAa,KAAa,SAA6B,IAAE;AACvD,WAAO,KAAK,OAAU,OAAO,KAAK,MAAM;AAAA,EAC1C;AAAA,EAKA,KAAc,KAAa,SAA6B,IAAE;AACxD,WAAO,KAAK,OAAU,QAAQ,KAAK,MAAM;AAAA,EAC3C;AAAA,EAKA,MACE,KACA,SAA6B,IAAE;AAE/B,WAAO,KAAK,OAAU,SAAS,KAAK,MAAM;AAAA,EAC5C;AAAA,EAKA,IAAa,KAAa,SAA6B,IAAE;AACvD,WAAO,KAAK,OAAU,OAAO,KAAK,MAAM;AAAA,EAC1C;AAAA,EAKA,OACE,KACA,SAA6B,IAAE;AAE/B,WAAO,KAAK,OAAU,UAAU,KAAK,MAAM;AAAA,EAC7C;AAAA,EAEA,OACE,QACA,KACA,SAA6B,CAAA,GAAE;AAE/B,SAAK,gBAAe;AAEX,aAAA;AAAA,MACP,MAAM,CAAE;AAAA,MACR,QAAQ,CAAE;AAAA,MACV;AAAA,MACA;AAAA,MACA,kBAAkB,KAAK,qBAAqB,KAAK,IAAI;AAAA,MACrD,GAAG;AAAA,IAAA;AAGD,QAAA,OAAO,YAAa,MAAK,OAAO;AAC3B,aAAA,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,OAAO;WACvC;AACE,aAAA,OAAO,EAAE,GAAG,KAAK,QAAQ,GAAG,OAAO;AAE1C,UAAI,SAAS,OAAO,IAAI,KAAK,CAAC,OAAO,kBAAkB;AACrD,eAAO,mBAAmB,CAAC,CAAC,SAAS,KAAK,WAAW,IAAI,CAAC;AAAA,MAC3D;AAAA,IACF;AAED,WAAO,IAAI,QAA0B,CAAC,SAAS,WAAU;AACtD,OAAA,MAAK,SAAS,OACZ,QAAQ,MAAM,EACd,KAAK,CAAC,aAA8B;AACnC,aAAK,iBAAgB;AACrB,gBAAQ,QAAQ;AAAA,MAAA,CACjB,EACA,MAAM,CAAC,UAAqB;AAC3B,aAAK,aAAa,KAAK;AACvB,eAAO,KAAK;AAAA,MAAA,CACb;AAAA,IAAA,CACJ;AAAA,EACH;AAAA,EAEA,aAAa,OAAiB;AAC5B,QAAI,MAAM,UAAU;AAClB,WAAK,OAAO,IAAI,KAAK,cAAc,MAAM,QAAQ,CAAC;AAAA,IACnD;AAEI,SAAA,UAAU,GAAG,CAAC,WAAW;AAAA,MAC5B,GAAG;AAAA,MACH,MAAM;AAAA,MACN,UAAU;AAAA,IACV,EAAA;AAAA,EACJ;AAAA,EAEA,cAAc,UAAuB;AACnC,QAAI,CAAC,SAAS,QAAQ,OAAO,SAAS,SAAS,UAAU;AACvD,aAAO,EAAE,OAAO,CAAC,MAAK,YAAY,EAAC;AAAA,IACpC;AAEG,QAAA,SAAS,KAAK,QAAQ;AACxB,aAAO,EAAE,GAAG,SAAS,KAAK;IAC3B;AAEG,QAAA,SAAS,KAAK,SAAS;AACzB,aAAO,EAAE,OAAO,CAAC,SAAS,KAAK,OAAO,EAAC;AAAA,IACxC;AAEM,WAAA,EAAE,GAAG,SAAS;EACvB;AAAA,EAEA,qBAAqB,OAAyB;AAC5C,SAAK,SAAS,YAAY;AAAA,MACxB,OAAO,MAAM;AAAA,MACb,QAAQ,MAAM;AAAA,MACd,YAAY,KAAK,MAAO,MAAM,SAAS,OAAQ,MAAM,SAAS,EAAE;AAAA,IAAA,CACjE;AAAA,EACH;AAAA,EAEA,WAAW,MAAmC;AACtC,UAAA,WAAW,IAAI;AAErB,WAAO,KAAK,IAAI,EAAE,QAAQ,CAAC,QAAO;AAChC,YAAM,QAAQ,KAAK;AAEnB,UAAI,OAAO,aAAa,eAAe,iBAAiB,UAAU;AAChE,SAAA,EAAG,MAAM,KAAK,KAAK,EAAE,QAAQ,CAAC,SAAS,SAAS,OAAO,KAAK,IAAI,CAAC;AAAA,MAAA,OAC5D;AACI,iBAAA,OAAO,KAAK,KAAK;AAAA,MAC3B;AAAA,IAAA,CACF;AAEM,WAAA;AAAA,EACT;;AA5NF,IAAM,OAAN;AAOE,cAPI,MAOG;AAEP,cATI,MASG,gBAAe;ACzBX,MAAA,UAAU,CACrB,MACA,kBACc;AACR,QAAAA,SAAQ,WAAW,WAAW,KAAK;AAEzC,MAAIA,WAAU,QAAW;AACvBC,SAAU,QAAQD;AAAA,EACnB;AAED,QAAM,YAAY,SAA0B;AAAA,IAC1C;AAAA,IACA,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,UAAU;AAAA,EAAA,CACX;AAEK,QAAA,cAAc,SAAS,CAAA,CAAE;AAC/B,QAAM,OAAO,IAAIC,KAAU,WAAW,WAAW;AAG1C,SAAA,IAAI,MAAM,MAAM;AAAA,IACrB,IAAIC,OAAuB,WAAiB;AAC1C,UAAIA,MAAK,KAAA,EAAO,SAAS,SAAS,GAAG;AAC5BA,eAAAA,MAAK,SAAS,SAAS;AAAA,MAC/B;AAED,UAAI,CAAC,YAAY,QAAQ,YAAY,EAAE,SAAS,SAAS,GAAG;AACnDA,eAAAA,MAAK,UAAU,GAAG;AAAA,MAC1B;AAED,aAAQA,MAAa;AAAA,IACvB;AAAA,EAAA,CACD;AACH;;"}